---
id: 1
title: "How to set Environment variable in Gatsby"
publishedAt: "17 May 2020"
summary: "Setting environment variable properly could be painful when it comes to SSG. Lets make it easy."
---
So you have planned to develop your own blog/portfolio site with Gatsby. You have some content that is getting rendered due to some secret API key and you don't want to expose these keys on gitHub. Well, one way to achieve this is, to use hardcoded strings and while pushing your code, you should replace it with some placeholder string. But it does not sound like a preferable way and trust me it is tedious too. Things get more interesting when it comes to Gatsby since there are two kinds of environment variables. One which can be accessed by your client (your browser) and the Second is server-side node.js which is accessible inside gatsby-config.js and/or gatsby-node.js.

## Accessing Environment Variables in Browser

All of the Project and OS level Environment variables are only available at build time, or when Node.js is running. They arenâ€™t immediately available at run time of the client code; they need to be actively captured and embedded into client-side JavaScript. To save you from trouble Gatsby provides inbuilt method to do that. For example if you have your AWS api which you want to access at run time, you can achieve it by appending prefix GATSBY_ to the variable name. So you .`env.*` file should look like below -

```
GATSBY_AWS_API='some api of yours'
```
and from the client, you can fetch it like below

```
const response = await fetch(process.env.GATSBY_AWS_API_DOWNLOAD)
```

## Accessing variables at build time

Gatsby runs several scripts at build time, written inside gatsby-config.js and gatsby-node.js. Environment variables will already be available when Node is running, so you can add them in the typical ways, e.g. by adding environment variables through your hosting/build tool, your OS, or when calling Gatsby on the command line. However, if you want to access them in the above-mentioned file, then you will have to have `dotenv` package installed as a dev dependencies. Add below piece of code somewhere at the top (before the env usage) in gatsby-config.js. Now the variables are available on process.env as usual. GATSBY_ prefix is not needed in this case.
```
require('dotenv').config({path: './.env.*'});
```

In case you want a deep dive checkout the gatsby <a href="https://www.gatsbyjs.com/docs/how-to/local-development/environment-variables" target="_blank" rel="noopener noreferrer">official docs</a>. You can play around with the variables on this <a href="https://codesandbox.io/s/6w9jjrnnjn?file=/src/pages/index.js" target="_blank" rel="noopener noreferrer">CodeSandbox</a>.